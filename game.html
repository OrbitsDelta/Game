function handleLogout() {
    // Полная очистка
    localStorage.removeItem('playerName');
    document.body.style.overflow = 'hidden';
    
    // Закрытие WebApp перед переходом
    if (window.Telegram?.WebApp?.close) {
        Telegram.WebApp.close();
    }
    
    // Жесткий редирект с очисткой истории
    setTimeout(() => {
        window.location.replace('Page1.html?logout=1&t=' + Date.now());
    }, 300);
}

    // Удаляем сохраненное имя
    localStorage.removeItem('playerName');

    // Сброс данных пользователя
    profileName.textContent = 'Гость';
    gameName.textContent = 'Не указано';
    profileAvatar.src = 'https://cdn-icons-png.flaticon.com/512/147/147144.png';
    regDate.textContent = 'Не указана';
    updateLoginStatus();

    // Закрываем все модальные окна
    hideConfirmModal();

    // Переадресация с параметром logout=1
    setTimeout(() => {
        window.location.href = 'Page1.html?logout=1';
    }, 1000);
}
